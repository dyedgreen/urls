var s,E,X,K,H={},$=[],xe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function w(t,e){for(var n in e)t[n]=e[n];return t}function Y(t){var e=t.parentNode;e&&e.removeChild(t)}function a(t,e,n){var o,i,r,l=arguments,u={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:u[r]=e[r];if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(l[r]);if(n!=null&&(u.children=n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)u[r]===void 0&&(u[r]=t.defaultProps[r]);return D(t,u,o,i,null)}function D(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++s.__v:i};return s.vnode!=null&&s.vnode(r),r}function I(t){return t.children}function C(t,e){this.props=t,this.context=e}function N(t,e){if(e==null)return t.__?N(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?N(t):null}function Z(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Z(t)}}function ee(t){(!t.__d&&(t.__d=!0)&&E.push(t)&&!U.__r++||K!==s.debounceRendering)&&((K=s.debounceRendering)||X)(U)}function U(){for(var t;U.__r=E.length;)t=E.sort(function(e,n){return e.__v.__b-n.__v.__b}),E=[],t.some(function(e){var n,o,i,r,l,u;e.__d&&(l=(r=(n=e).__v).__e,(u=n.__P)&&(o=[],(i=w({},r)).__v=r.__v+1,B(u,r,i,n.__n,u.ownerSVGElement!==void 0,r.__h!=null?[l]:null,o,l==null?N(r):l,r.__h),te(o,r),r.__e!=l&&Z(r)))})}function ie(t,e,n,o,i,r,l,u,p,h){var _,m,f,c,g,d,y,v=o&&o.__k||$,b=v.length;for(n.__k=[],_=0;_<e.length;_++)if((c=n.__k[_]=(c=e[_])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?D(null,c,null,null,c):Array.isArray(c)?D(I,{children:c},null,null,null):c.__b>0?D(c.type,c.props,c.key,null,c.__v):c)!=null){if(c.__=n,c.__b=n.__b+1,(f=v[_])===null||f&&c.key==f.key&&c.type===f.type)v[_]=void 0;else for(m=0;m<b;m++){if((f=v[m])&&c.key==f.key&&c.type===f.type){v[m]=void 0;break}f=null}B(t,c,f=f||H,i,r,l,u,p,h),g=c.__e,(m=c.ref)&&f.ref!=m&&(y||(y=[]),f.ref&&y.push(f.ref,null,c),y.push(m,c.__c||g,c)),g!=null?(d==null&&(d=g),typeof c.type=="function"&&c.__k!=null&&c.__k===f.__k?c.__d=p=ne(c,p,t):p=re(t,c,f,v,g,p),h||n.type!=="option"?typeof n.type=="function"&&(n.__d=p):t.value=""):p&&f.__e==p&&p.parentNode!=t&&(p=N(f))}for(n.__e=d,_=b;_--;)v[_]!=null&&(typeof n.type=="function"&&v[_].__e!=null&&v[_].__e==n.__d&&(n.__d=N(o,_+1)),_e(v[_],v[_]));if(y)for(_=0;_<y.length;_++)oe(y[_],y[++_],y[++_])}function ne(t,e,n){var o,i;for(o=0;o<t.__k.length;o++)(i=t.__k[o])&&(i.__=t,e=typeof i.type=="function"?ne(i,e,n):re(n,i,i,t.__k,i.__e,e));return e}function re(t,e,n,o,i,r){var l,u,p;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(n==null||i!=r||i.parentNode==null)e:if(r==null||r.parentNode!==t)t.appendChild(i),l=null;else{for(u=r,p=0;(u=u.nextSibling)&&p<o.length;p+=2)if(u==i)break e;t.insertBefore(i,r),l=r}return l!==void 0?l:i.nextSibling}function we(t,e,n,o,i){var r;for(r in n)r==="children"||r==="key"||r in e||F(t,r,null,n[r],o);for(r in e)i&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===e[r]||F(t,r,e[r],n[r],o)}function ae(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||xe.test(e)?n:n+"px"}function F(t,e,n,o,i){var r;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||ae(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||ae(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o||t.addEventListener(e,r?se:ce,r):t.removeEventListener(e,r?se:ce,r);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch(l){}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,n):t.removeAttribute(e))}}function ce(t){this.l[t.type+!1](s.event?s.event(t):t)}function se(t){this.l[t.type+!0](s.event?s.event(t):t)}function B(t,e,n,o,i,r,l,u,p){var h,_,m,f,c,g,d,y,v,b,A,x=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(p=n.__h,u=e.__e=n.__e,e.__h=null,r=[u]),(h=s.__b)&&h(e);try{e:if(typeof x=="function"){if(y=e.props,v=(h=x.contextType)&&o[h.__c],b=h?v?v.props.value:h.__:o,n.__c?d=(_=e.__c=n.__c).__=_.__E:("prototype"in x&&x.prototype.render?e.__c=_=new x(y,b):(e.__c=_=new C(y,b),_.constructor=x,_.render=Ce),v&&v.sub(_),_.props=y,_.state||(_.state={}),_.context=b,_.__n=o,m=_.__d=!0,_.__h=[]),_.__s==null&&(_.__s=_.state),x.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=w({},_.__s)),w(_.__s,x.getDerivedStateFromProps(y,_.__s))),f=_.props,c=_.state,m)x.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(x.getDerivedStateFromProps==null&&y!==f&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(y,b),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(y,_.__s,b)===!1||e.__v===n.__v){_.props=y,_.state=_.__s,e.__v!==n.__v&&(_.__d=!1),_.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(T){T&&(T.__=e)}),_.__h.length&&l.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(y,_.__s,b),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(f,c,g)})}_.context=b,_.props=y,_.state=_.__s,(h=s.__r)&&h(e),_.__d=!1,_.__v=e,_.__P=t,h=_.render(_.props,_.state,_.context),_.state=_.__s,_.getChildContext!=null&&(o=w(w({},o),_.getChildContext())),m||_.getSnapshotBeforeUpdate==null||(g=_.getSnapshotBeforeUpdate(f,c)),A=h!=null&&h.type===I&&h.key==null?h.props.children:h,ie(t,Array.isArray(A)?A:[A],e,n,o,i,r,l,u,p),_.base=e.__e,e.__h=null,_.__h.length&&l.push(_),d&&(_.__E=_.__=null),_.__e=!1}else r==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Se(n.__e,e,n,o,i,r,l,p);(h=s.diffed)&&h(e)}catch(T){e.__v=null,(p||r!=null)&&(e.__e=u,e.__h=!!p,r[r.indexOf(u)]=null),s.__e(T,e,n)}}function te(t,e){s.__c&&s.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(o){o.call(n)})}catch(o){s.__e(o,n.__v)}})}function Se(t,e,n,o,i,r,l,u){var p,h,_,m,f=n.props,c=e.props,g=e.type,d=0;if(g==="svg"&&(i=!0),r!=null){for(;d<r.length;d++)if((p=r[d])&&(p===t||(g?p.localName==g:p.nodeType==3))){t=p,r[d]=null;break}}if(t==null){if(g===null)return document.createTextNode(c);t=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,c.is&&c),r=null,u=!1}if(g===null)f===c||u&&t.data===c||(t.data=c);else{if(r=r&&$.slice.call(t.childNodes),h=(f=n.props||H).dangerouslySetInnerHTML,_=c.dangerouslySetInnerHTML,!u){if(r!=null)for(f={},m=0;m<t.attributes.length;m++)f[t.attributes[m].name]=t.attributes[m].value;(_||h)&&(_&&(h&&_.__html==h.__html||_.__html===t.innerHTML)||(t.innerHTML=_&&_.__html||""))}if(we(t,c,f,i,u),_)e.__k=[];else if(d=e.props.children,ie(t,Array.isArray(d)?d:[d],e,n,o,i&&g!=="foreignObject",r,l,t.firstChild,u),r!=null)for(d=r.length;d--;)r[d]!=null&&Y(r[d]);u||("value"in c&&(d=c.value)!==void 0&&(d!==t.value||g==="progress"&&!d)&&F(t,"value",d,f.value,!1),"checked"in c&&(d=c.checked)!==void 0&&d!==t.checked&&F(t,"checked",d,f.checked,!1))}return t}function oe(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(o){s.__e(o,n)}}function _e(t,e,n){var o,i,r;if(s.unmount&&s.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||oe(o,null,e)),n||typeof t.type=="function"||(n=(i=t.__e)!=null),t.__e=t.__d=void 0,(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(l){s.__e(l,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&_e(o[r],e,n);i!=null&&Y(i)}function Ce(t,e,n){return this.constructor(t,n)}function L(t,e,n){var o,i,r;s.__&&s.__(t,e),i=(o=typeof n=="function")?null:n&&n.__k||e.__k,r=[],B(e,t=(!o&&n||e).__k=a(I,null,[t]),i||H,H,e.ownerSVGElement!==void 0,!o&&n?[n]:i?null:e.firstChild?$.slice.call(e.childNodes):null,r,!o&&n?n:i?i.__e:e.firstChild,o),te(r,t)}s={__e:function(t,e){for(var n,o,i;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),i=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t),i=n.__d),i)return n.__E=n}catch(r){t=r}throw t},__v:0},C.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=w({},this.state),typeof t=="function"&&(t=t(w({},n),this.props)),t&&w(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),ee(this))},C.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ee(this))},C.prototype.render=I,E=[],X=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U.__r=0;var R,k,le,M=0,O=[],ue=s.__b,fe=s.__r,pe=s.diffed,he=s.__c,de=s.unmount;function me(t,e){s.__h&&s.__h(k,t,M||e),M=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return M=1,je(ye,t)}function je(t,e,n){var o=me(R++,2);return o.t=t,o.__c||(o.__=[n?n(e):ye(void 0,e),function(i){var r=o.t(o.__[0],i);o.__[0]!==r&&(o.__=[r,o.__[1]],o.__c.setState({}))}],o.__c=k),o.__}function j(t,e){var n=me(R++,3);!s.__s&&Ee(n.__H,e)&&(n.__=t,n.__H=e,k.__H.__h.push(n))}function Ie(){O.forEach(function(t){if(t.__P)try{t.__H.__h.forEach(q),t.__H.__h.forEach(W),t.__H.__h=[]}catch(e){t.__H.__h=[],s.__e(e,t.__v)}}),O=[]}s.__b=function(t){k=null,ue&&ue(t)},s.__r=function(t){fe&&fe(t),R=0;var e=(k=t.__c).__H;e&&(e.__h.forEach(q),e.__h.forEach(W),e.__h=[])},s.diffed=function(t){pe&&pe(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(O.push(e)!==1&&le===s.requestAnimationFrame||((le=s.requestAnimationFrame)||function(n){var o,i=function(){clearTimeout(r),ge&&cancelAnimationFrame(o),setTimeout(n)},r=setTimeout(i,100);ge&&(o=requestAnimationFrame(i))})(Ie)),k=void 0},s.__c=function(t,e){e.some(function(n){try{n.__h.forEach(q),n.__h=n.__h.filter(function(o){return!o.__||W(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],s.__e(o,n.__v)}}),he&&he(t,e)},s.unmount=function(t){de&&de(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(q)}catch(n){s.__e(n,e.__v)}};var ge=typeof requestAnimationFrame=="function";function q(t){var e=k;typeof t.__c=="function"&&t.__c(),k=e}function W(t){var e=k;t.__c=t.__(),k=e}function Ee(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function ye(t,e){return typeof e=="function"?e(t):e}async function Ne(t,e){let n=window.__xsrf_token;return await(await fetch("/graphql",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-XSRF-Token":n},body:JSON.stringify({query:t,variables:e})})).json()}function ve([t]){return t}function ke(t,e){let[n,o]=S(0),[i,r]=S(null),[l,u]=S(!0),[p,h]=S(null);if(p!=null)throw p;let _=()=>{u(!0),o(n+1)};return j(()=>{Ne(t,e).then(({data:m,errors:f})=>{u(!1),f!=null?h(f):r(m)}).catch(m=>h(m))},[t,n]),{data:i,loading:l,refetch:_}}function P({size:t="small",style:e=""}){return a("svg",{xmlns:"http://www.w3.org/2000/svg",class:`${t==="large"?"h-8 w-8":"h-4 w-4"} ${e!=null?e:""}`,viewBox:"0 0 24 24",stroke:"none",fill:"currentColor"},a("rect",{x:"10",y:"0",width:"4",height:"8",rx:"2",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})),a("rect",{x:"-2",y:"-4",width:"4",height:"8",rx:"2",transform:"translate(17.5, 6.5) rotate(45)",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.125s",repeatCount:"indefinite"})),a("rect",{x:"16",y:"10",width:"8",height:"4",rx:"2",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.25s",repeatCount:"indefinite"})),a("rect",{x:"-2",y:"-4",width:"4",height:"8",rx:"2",transform:"translate(17.5, 17.5) rotate(-45)",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.375s",repeatCount:"indefinite"})),a("rect",{x:"10",y:"16",width:"4",height:"8",rx:"2",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.5s",repeatCount:"indefinite"})),a("rect",{x:"-2",y:"-4",width:"4",height:"8",rx:"2",transform:"translate(6.5, 17.5) rotate(45)",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.625s",repeatCount:"indefinite"})),a("rect",{x:"0",y:"10",width:"8",height:"4",rx:"2",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.75s",repeatCount:"indefinite"})),a("rect",{x:"-2",y:"-4",width:"4",height:"8",rx:"2",transform:"translate(6.5, 6.5) rotate(-45)",opacity:"0"},a("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0.875s",repeatCount:"indefinite"})))}function z({title:t,onClick:e,disabled:n=!1,loading:o=!1,type:i="default",style:r}){let l=`h-8 px-2 flex space-x-2 justify-center items-center rounded-md font-bold ${r!=null?r:""}`;switch(i){case"flat":l+=" bg-white text-black",n||(l+=" hover:bg-gray-200");break;case"default":default:l+=" bg-blue-500 text-white",n||(l+=" hover:bg-blue-400")}return n===!0&&(l+=" opacity-80 cursor-not-allowed"),a("button",{class:l,onClick:n===!0?void 0:e},a("div",null,t),o===!0&&a(P,null))}function Pe(){window.location.href=window.location.href}function Ae(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=t[n];return JSON.stringify(e)}function Te({error:t}){return a("div",{class:"w-full flex justify-center p-8"},a("div",{class:"w-full max-w-3xl bg-red-500 rounded-lg p-4"},a("h1",{class:"text-white text-xl font-semibold"},"Error"),a("p",{class:"text-red-100"},"Sorry, something went wrong."),a("pre",{class:"text-white bg-red-900 rounded-lg p-4 mt-2 whitespace-pre-wrap break-all"},Ae(t)),a(z,{title:"Reload Page",onClick:Pe,type:"flat",style:"w-full mt-2"})))}var Q=class extends C{constructor(){super();this.state={error:!1}}componentDidCatch(e){console.error(e),this.setState({error:e})}render({children:e},{error:n}){return n!==!1?a(Te,{error:n}):e}},be=Q;function V({value:t,onChange:e,placeholder:n,loading:o,style:i}){return a("div",{class:`
    flex space-between w-full p-4 rounded-md
    bg-gray-200 dark:bg-gray-600
    text-black dark:text-white
    ${i!=null?i:""}
  `},a("input",{class:"w-4 h-8 flex-grow text-xl font-semibold bg-gray-200 dark:bg-gray-600",type:"text",value:t,onInput:r=>typeof e=="function"&&e(r.target.value),placeholder:n}),o&&a(P,{size:"large"}))}var He=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},a("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"}));function G({id:t,title:e,slug:n,url:o,upvoteCount:i}){return a("a",{class:"block w-full flex p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700",href:`/comments/${t}/${n}`},a("div",{class:"flex items-center text-blue-500 mr-4"},He,a("span",{class:"text-sm leading-none"},i)),a("div",{class:"flex-grow"},a("h1",{class:"mb-1 text-md font-semibold leading-none"},e),a("h2",{class:"text-sm text-gray-500 leading-none break-all"},o)))}function De(){let t=window.location.search.replace("?","").split("&").map(e=>e.split("="));for(let[e,n]of t)if(e==="q")return decodeURIComponent(n);return""}function Ue(t){let e=`/search${t.length?`?q=${encodeURIComponent(t)}`:""}`;window.history.replaceState(null,"",e)}function J(t=500){let[e,n]=S(De()),[o,i]=S(e);return j(()=>{let r=setTimeout(()=>{n(o),Ue(o)},t);return()=>clearTimeout(r)},[o]),[o,e,i]}function Fe(){var u,p,h;let[t,e,n]=J(),{data:o,loading:i,refetch:r}=ke(ve`
    query SearchQuery($query: String!) {
      search(query: $query) {
        id
        results(first: 20) {
          edges {
            node {
              id
              url
              title
              slug
              upvoteCount
            }
          }
        }
      }
    }
  `,{query:e});j(()=>r({query:e}),[e]);let l=((h=(p=(u=o==null?void 0:o.search)==null?void 0:u.results)==null?void 0:p.edges)==null?void 0:h.length)>0;return a("div",{class:"w-full flex flex-col items-center"},a(V,{placeholder:"Search ...",value:t,onChange:n,loading:i,style:"mb-2"}),l?o.search.results.edges.map(({node:_})=>a(G,{..._})):a("h3",{class:"text-gray-500 my-4"},"No matching results found"))}L(a(be,null,a(Fe,null)),document.getElementById("search"));
//# sourceMappingURL=search.js.map
